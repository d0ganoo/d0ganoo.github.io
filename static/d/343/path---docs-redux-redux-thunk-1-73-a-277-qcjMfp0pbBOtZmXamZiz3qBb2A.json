{"data":{"markdownRemark":{"fields":{"slug":"/docs/Redux/Redux-thunk.1"},"id":"f68952f3-9086-5191-9de0-e084bfecc844","html":"<h1 align=\"center\">\n  Redux\n</h1>\n<p>Redux ne permet pas les requêtes asynchrones => redux-thunk répond a cette problématique\nRedux permet également l'ajout de middlewares qui peuvent agir sur les actions avant de déclencher le reducer associé.\nLe plus populaire des middlewares et <a href=\"https://github.com/d0ganoo/Docs/blob/master/redux-thunk.md\">redux-thunk</a></p>\n<p>Structure d'un projet Redux:</p>\n<pre><code class=\"language-Bash\">|-- Src\n  |-- actions\n  |-- components\n  |-- containers \n  |-- reducers\nindex.js\n</code></pre>\n<p>Redux permet d'avoir un gros objet State qui va contenir toutes les données de l'application. C'est le Store de redux.</p>\n<h3 id=\"indexjs\"><a href=\"#indexjs\" aria-label=\"indexjs permalink\" class=\"post-toc-anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>index.js</h3>\n<pre><code class=\"language-Javascript\">import ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\nimport {createStore, applyMiddleware} from 'redux';\n\nimport App from './components/app';\nimport reducers from './reducers';\n\nconst createStoreWithMiddleware = applyMiddleware()(createStore); // Crée le store de redux\n\nReactDom.render(\n  &#x3C;Provider store={createStoreWithMiddleware(reducers, window.__REDUX_DEVTOOLS_EXTENSION__ &#x26;&#x26; window.__REDUX__DEVTOOLS_EXTENSION__())}>\n    &#x3C;App />\n  &#x3C;/Provider>\n)\n\n// Connect le store de redux aux reducers et permet l'accès au Redux devtools\n</code></pre>\n<h3 id=\"les-reducers\"><a href=\"#les-reducers\" aria-label=\"les reducers permalink\" class=\"post-toc-anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Les reducers</h3>\n<p>Un reducer est une fonction qui retourne un objet. Il permet de mettre à jour le Store de redux.\nChaque patie du store de redux est donc renseigné par un reducer.</p>\n<p>Root reducer: CombineReducers(func) permet de lier les parties du store et leur reducer.</p>\n<p>Les reducers ne sont jamais appelé directement dans notre application. Ils sont appelés par le biais d'un déclencheur qui va appelé tous les reducers qui sont présent dans le root reducer.\nDonc au lancement de l'application tous les reducers sont appelés.</p>\n<pre><code class=\"language-Javascript\">export default function(state,action){\n  switch(action.type){\n    case USER_SELECTED: return action.payload; // continent le user, cf l'action\n  }\n  return state;\n}\n</code></pre>\n<h3 id=\"connecter-reduc-à-react\"><a href=\"#connecter-reduc-%C3%A0-react\" aria-label=\"connecter reduc à react permalink\" class=\"post-toc-anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Connecter reduc à react</h3>\n<p>La fonction connect fait le pont entre redex et react: import {connect} from 'react-redux';</p>\n<p>Code issus d'un container (après la class étendu du component react)</p>\n<pre><code class=\"language-Javascript\">function mapStateToProps(state){\n  return{\n     myUsers:state.users\n  }\n}\n\nexport default connect(mapStateToProps)(nom_Component);\n</code></pre>\n<p>Le reducer retourne le state et mapStateToProps la transmet aux props de react. C'est connect qui définit mapStateToProps comme pont en react et redux.</p>\n<h3 id=\"les-actions\"><a href=\"#les-actions\" aria-label=\"les actions permalink\" class=\"post-toc-anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Les actions</h3>\n<p>Les actions permettent de déclencher le reducer attendu.\nL'écriture de l'action se fait dans le dossier action</p>\n<pre><code class=\"language-Javascript\">export function selectUser(user){\n  return {\n    type: USER_SELECTED,\n    payload: user\n  }\n}\n</code></pre>\n<h2 id=\"faire-le-pont-entre-les-actions-et-les-reducers\"><a href=\"#faire-le-pont-entre-les-actions-et-les-reducers\" aria-label=\"faire le pont entre les actions et les reducers permalink\" class=\"post-toc-anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Faire le pont entre les actions et les reducers</h2>\n<p>Code appartenant au container</p>\n<pre><code class=\"language-Javascript\">import {bindActionCreators} from 'redux';\n\nfunction mapDispatchToProps(dispatch){\n  return bindActionCreators({selectUser:selectUser}, dispatch)\n}\n</code></pre>\n<p>Dispatch permet d'envoyer l'action à tous les reducers et bindActionCreators de les rendre accèssible dans les props pour react.</p>","frontmatter":{"date":null,"title":"Redux","root":"/docs"}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}